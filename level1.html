<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>èŒ¶é“ãŠç‚¹å‰ã‚¯ã‚¤ã‚º</title>
<style>
  body {
    font-family: "Zen Maru Gothic", sans-serif;
    text-align: center;
    background-color: #f9f8f3;
    color: #333;
    margin: 0;
    padding: 0;
  }

  h1, h2 {
    color: #3b5530;
  }

  button {
    background-color: #4b8b3b;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1rem;
    margin-top: 15px;
    transition: 0.3s;
  }

  button:hover {
    background-color: #5dc34a;
  }

  #start-screen, #video-section, #quiz-section, #result-section {
    display: none;
    margin-top: 40px;
  }

  video {
    border-radius: 12px;
    box-shadow: 0 0 8px rgba(0,0,0,0.2);
  }

  .choice-btn {
    display: block;
    width: 80%;
    max-width: 400px;
    margin: 10px auto;
    padding: 10px;
    background-color: #e8f5e4;
    border: 2px solid #4b8b3b;
    border-radius: 10px;
    cursor: pointer;
  }

  .choice-btn:hover {
    background-color: #d7f0d0;
  }

  #progress {
    margin-top: 15px;
    font-weight: bold;
    color: #4b8b3b;
  }

  #result-section h2 {
    color: #2f4f2f;
  }

  #score {
    font-size: 2rem;
    color: #4b8b3b;
  }

  /* æˆ»ã‚‹/æ¬¡ã¸ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ */
  .nav-btns {
    display: flex;
    justify-content: center;
    gap: 20px;
  }

</style>
</head>
<body>

<!-- ğŸŸ¢ ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
<div id="start-screen" style="display:block;">
  <h1>èŒ¶é“ãŠç‚¹å‰ã‚’å­¦ã¼ã†ï¼ˆãƒ¬ãƒ™ãƒ«1ï¼‰</h1>
  <p>é“å…·ã®é‹ã³å‡ºã—ã‹ã‚‰ç‰‡ä»˜ã‘ã¾ã§ã®æµã‚Œã‚’è¦‹ã¦ã€æœ€å¾Œã«ã‚¯ã‚¤ã‚ºã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ã€‚</p>
  <button id="start-btn">ã¯ã˜ã‚ã‚‹</button>
</div>

<!-- ğŸ¥ å‹•ç”»ãƒ‘ãƒ¼ãƒˆ -->
<div id="video-section">
  <h2 id="video-title">â‘  é“å…·ã®é‹ã³å‡ºã—</h2>
  <video id="tea-video" width="360" controls>
    <source id="tea-source" src="img/game/dougu1.mp4" type="video/mp4">
    ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ video ã‚¿ã‚°ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
  </video>
  <p id="video-caption">ãŠç‚¹å‰ã«ä½¿ã†é“å…·ã‚’é‹ã³å‡ºã—ã¾ã™ã€‚</p>
  <p id="progress">1 / 5</p>

  <!-- â—€â–¶ ãƒŠãƒ“ãƒœã‚¿ãƒ³ -->
  <div class="nav-btns">
    <button id="prev-video-btn">â† å‰ã«æˆ»ã‚‹</button>
    <button id="next-video-btn">æ¬¡ã¸ â†’</button>
  </div>
</div>

<!-- ğŸ§© ã‚¯ã‚¤ã‚ºãƒ‘ãƒ¼ãƒˆ -->
<div id="quiz-section">
  <h2 id="quiz-question"></h2>
  <div id="choices"></div>
  <p id="quiz-progress"></p>
</div>

<!-- ğŸŒ¸ çµæœç”»é¢ -->
<div id="result-section">
  <h2>çµæœç™ºè¡¨</h2>
  <p>ã‚ãªãŸã®å¾—ç‚¹ã¯</p>
  <p id="score">0ç‚¹</p>
  <p id="comment"></p>
  <button id="retry-btn">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
  <button onclick="location.href='level1~5.html'">ğŸ  ã‚¯ã‚¤ã‚ºä¸€è¦§ã«æˆ»ã‚‹</button>
</div>

<script>
// ======== å‹•ç”»ã‚¹ãƒ†ãƒƒãƒ— =========
const videoSteps = [
  { title: "â‘  é“å…·ã®é‹ã³å‡ºã—", file: "img/game/dougu1.mp4", caption: "ãŠç‚¹å‰ã«ä½¿ã†é“å…·ã‚’ä¸å¯§ã«é‹ã³å‡ºã—ã¾ã™ã€‚" },
  { title: "â‘¡ é“å…·ã‚’æ¸…ã‚ã‚‹", file: "img/game/dougu2.mp4", caption: "èŒ¶æ“ã‚„èŒ¶ç¢—ãªã©ã‚’æ¸…ã‚ã€å¿ƒã‚’æ•´ãˆã¾ã™ã€‚" },
  { title: "â‘¢ ãŠèŒ¶ã‚’ãŸã¦ã‚‹", file: "img/game/dougu3.mp4", caption: "ãŠèŒ¶ã‚’ä¸å¯§ã«ç‚¹ã¦ã¦ã€å®¢ã‚’æ€ã„ã‚„ã‚Šã¾ã™ã€‚" },
  { title: "â‘£ ãŠèŒ¶ã‚’å·®ã—ä¸Šã’ã‚‹", file: "img/game/dougu4.mp4", caption: "ãŠèŒ¶ã‚’é™ã‹ã«å·®ã—å‡ºã—ã¾ã™ã€‚" },
  { title: "â‘¤ é“å…·ã‚’ã—ã¾ã†", file: "img/game/dougu5.mp4", caption: "ä½¿ã£ãŸé“å…·ã‚’ä¸å¯§ã«ç‰‡ä»˜ã‘ã¾ã™ã€‚" }
];

let currentVideo = 0;

// ======== ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ =========
const quizData = [
  {
    question: "ãŠç‚¹å‰ã®æœ€åˆã«è¡Œã†ã®ã¯ã©ã‚Œï¼Ÿ",
    choices: ["ãŠèŒ¶ã‚’ãŸã¦ã‚‹", "é“å…·ã‚’é‹ã³å‡ºã™", "ãŠèŒ¶ã‚’å·®ã—ä¸Šã’ã‚‹", "é“å…·ã‚’ã—ã¾ã†"],
    answer: 1
  },
  {
    question: "ãŠèŒ¶ã‚’ãŸã¦ã‚‹å‰ã«è¡Œã†å¤§åˆ‡ãªä½œæ³•ã¯ï¼Ÿ",
    choices: ["é“å…·ã‚’æ¸…ã‚ã‚‹", "ãŠè¾å„€ã‚’ã™ã‚‹", "ãŠèŒ¶ã‚’é£²ã‚€", "è“å­ã‚’å‡ºã™"],
    answer: 0
  },
  {
    question: "æœ€å¾Œã«è¡Œã†å‹•ä½œã¯ï¼Ÿ",
    choices: ["ãŠèŒ¶ã‚’ç‚¹ã¦ã‚‹", "é“å…·ã‚’ã—ã¾ã†", "ãŠèŒ¶ã‚’å·®ã—ä¸Šã’ã‚‹", "æŒ¨æ‹¶ã™ã‚‹"],
    answer: 1
  }
];

let currentQuiz = 0;
let score = 0;

// ======== è¦ç´ å–å¾— =========
const startScreen = document.getElementById("start-screen");
const videoSection = document.getElementById("video-section");
const quizSection = document.getElementById("quiz-section");
const resultSection = document.getElementById("result-section");

const teaVideo = document.getElementById("tea-video");
const teaSource = document.getElementById("tea-source");
const videoTitle = document.getElementById("video-title");
const videoCaption = document.getElementById("video-caption");
const progress = document.getElementById("progress");

const startBtn = document.getElementById("start-btn");
const nextVideoBtn = document.getElementById("next-video-btn");
const prevVideoBtn = document.getElementById("prev-video-btn");

const quizQuestion = document.getElementById("quiz-question");
const choicesDiv = document.getElementById("choices");
const quizProgress = document.getElementById("quiz-progress");

const scoreText = document.getElementById("score");
const commentText = document.getElementById("comment");
const retryBtn = document.getElementById("retry-btn");

// ======== å‹•ç”»ã‚»ãƒƒãƒˆ =========
function setVideo(index) {
  const step = videoSteps[index];
  videoTitle.textContent = step.title;
  videoCaption.textContent = step.caption;
  progress.textContent = `${index + 1} / ${videoSteps.length}`;

  // æœ€åˆã®å‹•ç”»ã¯æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’éš ã™
  prevVideoBtn.style.display = index === 0 ? "none" : "inline-block";

  teaSource.src = step.file;
  teaVideo.load();
  teaVideo.play().catch(() => {});
}

// ======== å‹•ç”»ã‚¹ã‚¿ãƒ¼ãƒˆ =========
startBtn.addEventListener("click", () => {
  startScreen.style.display = "none";
  videoSection.style.display = "block";
  currentVideo = 0;
  setVideo(currentVideo);
});

// â–¶ æ¬¡ã¸
nextVideoBtn.addEventListener("click", () => {
  if (currentVideo < videoSteps.length - 1) {
    currentVideo++;
    setVideo(currentVideo);
  } else {
    videoSection.style.display = "none";
    startQuiz();
  }
});

// â—€ æˆ»ã‚‹
prevVideoBtn.addEventListener("click", () => {
  if (currentVideo > 0) {
    currentVideo--;
    setVideo(currentVideo);
  }
});

// ======== ã‚¯ã‚¤ã‚ºé–‹å§‹ =========
function startQuiz() {
  currentQuiz = 0;
  score = 0;
  quizSection.style.display = "block";
  showQuestion();
}

// ======== ã‚¯ã‚¤ã‚ºè¡¨ç¤º =========
function showQuestion() {
  const q = quizData[currentQuiz];
  quizQuestion.textContent = q.question;
  quizProgress.textContent = `${currentQuiz + 1} / ${quizData.length}`;
  choicesDiv.innerHTML = "";

  q.choices.forEach((choice, i) => {
    const btn = document.createElement("button");
    btn.textContent = choice;
    btn.className = "choice-btn";
    btn.addEventListener("click", () => selectAnswer(i));
    choicesDiv.appendChild(btn);
  });
}

// ======== å›ç­”å‡¦ç† =========
function selectAnswer(i) {
  const q = quizData[currentQuiz];
  if (i === q.answer) score++;

  currentQuiz++;
  if (currentQuiz < quizData.length) {
    showQuestion();
  } else {
    showResult();
  }
}

// ======== çµæœè¡¨ç¤º =========
function showResult() {
  quizSection.style.display = "none";
  resultSection.style.display = "block";

  scoreText.textContent = `${score}ç‚¹`;

  if (score === quizData.length) {
    commentText.textContent = "å®Œç’§ã§ã™ï¼ãŠç‚¹å‰ã®æµã‚Œã‚’ã‚ˆãç†è§£ã—ã¦ã„ã¾ã™ã€‚";
  } else if (score >= 2) {
    commentText.textContent = "ã‚ˆãã§ãã¾ã—ãŸï¼ã‚‚ã†å°‘ã—å¾©ç¿’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚";
  } else {
    commentText.textContent = "ã‚‚ã†ä¸€åº¦å‹•ç”»ã‚’è¦‹ã¦å¾©ç¿’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚";
  }
}

// ======== ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ =========
retryBtn.addEventListener("click", () => {
  resultSection.style.display = "none";
  startScreen.style.display = "block";

  currentVideo = 0;
  teaSource.src = videoSteps[0].file;
  teaVideo.load();
  videoTitle.textContent = videoSteps[0].title;
  videoCaption.textContent = videoSteps[0].caption;
  progress.textContent = `1 / ${videoSteps.length}`;
});
</script>

</body>
</html>
