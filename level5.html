<div class="image-container" id="imageContainer">
  <!-- ç”»åƒã¯JavaScriptã§å‹•çš„ã«è¡¨ç¤º -->
</div>

<script>
const steps = [
  {num: 1, src: "img/game/1_hakobi.jpg", alt: "é“å…·ã‚’é‹ã³å‡ºã™", label: "A"},
  {num: 2, src: "img/game/2_kiyomeru.jpg", alt: "é“å…·ã‚’æ¸…ã‚ã‚‹", label: "B"},
  {num: 3, src: "img/game/3_tateru.jpg", alt: "ãŠèŒ¶ã‚’ãŸã¦ã‚‹", label: "C"},
  {num: 4, src: "img/game/4_sasageru.jpg", alt: "ãŠèŒ¶ã‚’å·®ã—ä¸Šã’ã‚‹", label: "D"},
];

const correctOrder = [1, 2, 3, 4]; 
let currentStep = 0;
let selectedImages = [];

// é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function loadImages() {
  const container = document.getElementById("imageContainer");
  container.innerHTML = "";

  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦è¡¨ç¤º
  const shuffled = shuffleArray([...steps]); 
  shuffled.forEach(step => {
    const div = document.createElement("div");
    div.className = "img-box";
    div.innerHTML = `
      <img src="${step.src}" alt="${step.alt}" class="step-image" onclick="selectStep(${step.num}, this)">
      <p class="label">${step.label}</p>
    `;
    container.appendChild(div);
  });
}

function selectStep(num, imgElement) {
  const result = document.getElementById("result");
  const resetBtn = document.getElementById("resetBtn");

  if (selectedImages.includes(num)) return;

  imgElement.classList.add("selected");
  selectedImages.push(num);

  if (num === correctOrder[currentStep]) {
    currentStep++;
    if (currentStep === correctOrder.length) {
      result.textContent = "ğŸ‰ æ­£è§£ã§ã™ï¼ãŠç‚¹å‰ã®é †åºã‚’ã‚ˆãç†è§£ã—ã¦ã„ã¾ã™ã€‚";
      result.style.color = "green";
      resetBtn.style.display = "inline-block";
    }
  } else {
    result.textContent = "âŒ é †ç•ªãŒé•ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚";
    result.style.color = "red";
    resetBtn.style.display = "inline-block";
    disableAllImages();
  }
}

function disableAllImages() {
  const imgs = document.querySelectorAll(".step-image");
  imgs.forEach(img => {
    img.style.pointerEvents = "none";
  });
}

function resetQuiz() {
  selectedImages = [];
  currentStep = 0;
  document.getElementById("result").textContent = "";
  document.getElementById("resetBtn").style.display = "none";
  loadImages();
}

// åˆå›èª­ã¿è¾¼ã¿
loadImages();
</script>
